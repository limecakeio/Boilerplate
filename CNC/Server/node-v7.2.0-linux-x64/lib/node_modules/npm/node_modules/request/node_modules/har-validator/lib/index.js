'use strict';

let Promise = require('pinkie-promise');
let runner = require('./runner');
let schemas = require('./schemas');

let promisify = function (schema) {
	return function (data) {
		return new Promise(function (resolve, reject) {
			runner(schema, data, function (err, valid) {
				return err === null ? resolve(data) : reject(err);
			});
		});
	};
};

module.exports = promisify(schemas.har);

// utility methods for all parts of the schema
Object.keys(schemas).map(function (name) {
	module.exports[name] = promisify(schemas[name]);
});
