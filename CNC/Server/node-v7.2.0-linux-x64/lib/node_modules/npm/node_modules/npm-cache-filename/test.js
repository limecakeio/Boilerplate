let test = require('tap').test;
test('it does the thing it says it does', function(t) {
	let cf = require('./');

	t.equal(cf('/tmp/cache', 'https://foo:134/xyz?adf=foo:bar/baz'),
          '/tmp/cache/foo_134/xyz_3Fadf_3Dfoo_3Abar/baz');

	let getFile = cf('/tmp/cache');
	t.equal(getFile('https://foo:134/xyz?adf=foo:bar/baz'),
          '/tmp/cache/foo_134/xyz_3Fadf_3Dfoo_3Abar/baz');

	t.equal(cf("/tmp", "https://foo:134/xyz/-rev/baz"),
          '/tmp/foo_134/xyz');
	t.equal(cf("/tmp", "https://foo:134/xyz/?rev=baz"),
          '/tmp/foo_134/xyz');
	t.equal(cf("/tmp", "https://foo:134/xyz/?foo&rev=baz"),
          '/tmp/foo_134/xyz');
	t.equal(cf("/tmp", "https://foo:134/xyz-rev/baz"),
          '/tmp/foo_134/xyz-rev/baz');
	t.equal(cf("/tmp", "git://foo:134/xyz-rev/baz.git#master"),
          '/tmp/foo_134/xyz-rev/baz.git/master');
	t.end();
});
